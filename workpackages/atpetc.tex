\begin{workpackage}[id=atpetc,wphases=0-48,type=RTD,
  short=ATPs etc.,% for Figure 5.
  title={ATP, SAT, SMT, Model checkers},
  lead=Lie,
  LieRM=10]

\ednote{MK: interested parties (add their sites and RM here): Guillaume Burel, Raphaël Cauderlier, David Deharbe, Pascal Fontaine, Emilio J. Gallego Arias, Olivier Hermant, Cezary Kaliszyk, Chantal Keller, Filip Marić, Stephan Merz, Dale Miller, Julien Narboux, Martin Suda, Josef Urban}

\begin{wpobjectives}
  The objective of this work package is to \ldots

This includes notably:
  \begin{compactitem}
  \item \ldots
  \end{compactitem}
  A key aspect will be to foster \ldots
\end{wpobjectives}


\begin{wpdescription}

  The aim of this work package is to connect automated tools to the Logipedia
  infrastructure.

% https://annuel2.framapad.org/p/9ef1-logipedia?lang=fr

The importance of proofs in automated theorem provers, satisfiability
modulo theories solvers, propositional satisfiability solvers and
model checkers is increasingly recognized.  While for the
propositional case, the community agrees on a well defined proof
format, the situation is not clear for the other kinds of automated
reasoners.  There is no clear format for SMT, and the TSTP format for
automated theorem provers fixes a syntactic template for proofs rather
than providing an unambiguous framework to express proofs
semantically.

Some preliminary works predating this proposal clearly establish that
Dedukti can accommodate proofs in Satisfiability Modulo Theories,
automated theorem provers, and SMT.  In this work package, we will
build on those preliminary work and provide a set of conduits from the
established formats used in automated tools. For the tools that do not
have yet an established format, we will make a selection of tools
(Zipperposition and E for automated theorem provers, CVC4 and veriT
for SMT, ??? for model checking) and provide a conduits for those
tools.  These conduits and the techniques used in the embedded
translation will be properly documented, to ease integration of
further tools of the kind.  If a standardized proof format appears for
some kind of tools, the conduits will be updated to adopt the new
standard.

In this work package, we also plan to integrate in Logipedia some
well-chosen proofs coming from automated tools.  Well-chosen proofs
will have to be representative of typical applications of the tools,
and be of reasonable size.  They will serve as examples to the
community, to illustrate the potentials of Dedukti and Logipedia.


Create the infrastructure to enable the long term goal: be able to split a large proof
obligation into smaller parts and distribute to the appropriate automatic engines, that
would all produce proofs, glued together in a single large proof for the original proof
obligation.
\ednote{Nancy, Liège}
\end{wpdescription}


\begin{tasklist}
\begin{task}[id=instrumenting, title=Instrumenting ATPs to produce
  traces]
  Task leader: Pascal Fontaine
  % WP Leader supervision: Pascal
  % Participants
  % Stephan Schulz
  % Martin Suda
  % Guillaume Bury (OCamlPro)
  % Guillaume Burel
  % Julien Narboux
  % Pedro Quaresma
  % Predrag Janicic
  % Resources: One PhD student shared bw Schulz and Fontaine
  % Albin Coquereau (OCamlPro)
  % Sylvain Conchon (OCamlPro)
  
Considered provers:
\begin{itemize}
\item Cubicle (OcamlPro, Guillaume Bury, Sylvain Conchon)
\item provers for geometry (Julien Narboux and Pedro Quaresma)
\item coherent logic theorem prover (Predrag Janicic)
\item SMT (alt-ergo, veriT: Pascal Fontaine)
\item FOL ATPs (Pascal Fontaine, Stephan Schulz)
\item \dots
\end{itemize}

traces from SAT: understood

traces from SMT: still some gaps, about arithmetic, preprocessing.  Engineering issue too because of the amount of code that is involved

traces from geometry solvers: seems to be a good candidate, because the proof process is suitable to produce traces

traces from FOL: there is a format, and mainstream solvers do follow the standard format, but proofs are coarse grained

traces from HOL provers: strongly relates to FOL

\end{task}


\begin{task}[id=tracetodedukti, title=Translate ATP traces into Dedukti]
  Task leader: Guillaume Burel
  %Pascal

As pointed out in Task~\localtaskref{instrumenting}, it is easier to
instrument provers to make them output traces instead of directly
provide Dedukti proofs. The goal of this task is to reconstruct the
proof traces in order to build Dedukti proofs from them. The proposed
process is the following: each step of the trace is transformed into
an independent subproblem; each of these subproblems is given to a
prover that can output Dedukti proofs; proofs of the subproblems are
then combined to produce a global proof of the original problem. Since
subproblems correspond to atomic steps of the proof trace, they are
relatively simple, so that we can hope that the prover producing
Dedukti proofs will not struggle to find a proof. This process is
quite similar to what is done by the hammer tools of interactive
theorem provers (Sledgehammer in Isabelle/HOL, HOLyHammer for HOL4, etc.)
which reconstruct proofs from traces produced by automated theorem
provers.

This scheme has already been prototyped in a tool called
\href{https://github.com/Deducteam/ekstrakto}{Ekstrakto}. Ekstrakto takes a TSTP
file, as can be produced by e.g.\ the provers E and Zipperposition, and it uses
Zenon Modulo and ArchSAT to prove the subproblems. Ekstrakto was designed to be
agnostic w.r.t.\ the prover producing the trace; in particular it does not
depend on the specific set of inference rules of the prover. It was also
designed to be agnostic w.r.t.\ the prover used to prove the subproblems; it is
only required that the prover can output a Dedukti proof in the correct encoding
of first-order logic.

Although Ekstrakto has already shown that it is a
valuable approach, it is work in progress. In particular, the
following issues still need to be addressed:

\begin{compactenum}
  % extension to other proof trace formats
\item Up to now, Ekstrakto can only take traces in TSTP format as input. We plan
  to make it understand traces in other formats, notably traces from SMT
  solvers, as well as all formats developed in
  Task~\localtaskref{instrumenting}.

  Deliverables :
  \begin{itemize}
  \item T+6 a version of Ekstrakto that input traces from SMT solvers
  \end{itemize}


  % unprovable steps

\item  Some steps in the proof traces are not provable: their conclusion is
  not a logical consequence of their premises. However, they preserve
  provability: the original problem has a proof if and only if the
  problem with the conclusion of the step also has a proof. This is the
  case for instance of the Skolemization step in first-order automated
  theorem provers, of the introduction of new definitions, as well as
  the RAT property in traces produced by SAT solvers. The approach of
  Ekstrakto cannot be used here, because the subproblem corresponding to
  the step cannot be proved. However, since provability is preserved, it
  should be possible to transform a
  proof using the conclusion of the step into a proof using its
  premises. Such a transformation depends on the nature of the step that
  has been used. We plan to include in Ekstrakto a way to handle
  Skolemization and definition introduction, which are the two step
  families that are missing to be able to manage all traces from the
  major first-order theorem provers.

  Deliverables :
  \begin{itemize}
  \item T+12 a version of Ekstrakto that handles definition-introduction steps
  \item T+24 a version of Ekstrakto that handles Skolemization steps
  \end{itemize}


  % specialization for theories

\item  Dedukti-producing provers used by Ekstrakto, namely Zenon Modulo and
  ArchSAT, are meant for pure first-order logic. However, we would like
  to deal with proof traces that use some specialized theory,
  e.g.\ arithmetic or bit-vectors, as could be output by SMT
  solvers. Although such theories could be presented as a set of axioms
  in first-order logic, it is almost certain that neither Zenon Modulo
  nor ArchSAT could be able to find non-trivial proofs using these
  axioms. Here, the idea would be to develop small provers dedicated to
  a particular theory, and outputting Dedukti proofs. Such provers would
  be called when a step in the trace relies on said theory. These
  provers need not be very optimized, since trace steps are relatively
  small; this should help producing Dedukti traces. A way to achieve
  this could be to extend Zenon Modulo: indeed, Zenon modulo can find
  proofs modulo arithmetic, but it is not able to produce a Dedukti
  proof yet.

  Deliverables :
  \begin{itemize}
  \item T+36 a prover modulo arithmetic outputting Dedukti proofs
  \item T+48 a prover modulo another theory outputting Dedukti proofs
  \end{itemize}

\end{compactenum}
  Depends on T1.

  One PhD student
  
\end{task}


\begin{task}[id=deduktitoatp, title=Translate Dedukti statements into ATPs inputs]
Task leader: ? (Contact: Chantal Keller)

\begin{itemize}
\item encodings into FOL
\item links to WP6: reverse mathematics
\item benchmarks
\end{itemize}

\end{task}


\begin{task}[id=library, title=Logipedia as a source of knowledge for ATP]
  Task leader: Martin Suda (Contact: Pascal Fontaine)

Depends on T3.

\begin{itemize}
\item A library of known facts for ATPs
\item Lemma selection is crucial
\end{itemize}

Proposition: Add in ACSL (C specification language) an "import from
Logipedia, ..." which allows a user to get the ressources to model the
behavior of its code. The modelisation is at the end used by ATP through
Frama-C-WP.

\end{task}


\begin{task}[id=reconstruction, title=ATPs for Logipedia]
  Task leader: Cezary Kaliszyk (Contact: Chantal Keller)

  Six month PhD student

\begin{itemize}
\item native provers for Logipedia
\item proof reconstruction
\end{itemize}

\end{task}


\begin{task}[id=readiness, title=Using ATPs to increase Logipedia readiness]
  Task leader: ?
  (Contact: Chantal Keller)

\begin{itemize}
\item ATPs can be used to fill the holes in proofs (e.g. PVS)
\item ATPs can be used to fill the gaps between systems and alignments
\end{itemize}

\end{task}


\begin{task}[id=cooperation, title=Make ATPs cooperate]
  Task leader: François Bobot (Contact: Chantal Keller)

  30 h.m

\begin{itemize}
\item Why3: gather the proof from the called provers, add traces for the
  Why3 transformations and send all this information to Ekstrakto
\item External preprocessing, add traces to the rewrite engine of
  Frama-C-WP, which is used before sending goals to solvers, and give
  them to Ekstrakto
\item Add in ACSL (C specification language) an "import from Logipedia,
  ..." which allows a user to get the ressources to model the behavior
  of its code. The modelisation is at the end used by ATP through
  Frama-C-WP. (Move to T4?)
\end{itemize}

\end{task}
\end{tasklist}


% \begin{tasklist}
%   \begin{task}[id=tools,title=Automatic Tools Exporting Proofs]
%     %% Guillaume Burel: expertise
%     %% Raphael Cauderlier: SAT/FOL proof checking in Dedukti
%     %% David Deharbe: pr in Atelier B
%     %% Pascal Fontaine: SMT
%     %% Emilio J. Gallego Arias
%     %% Thibault Gauthier
%     %% Olivier Hermant
%     %% Cezary Kaliszyk
%     %% Chantal Keller: expertise in translating proofs from SAT/SMT into other formalisms
%     %% Filip Marić
%     %% Stephan Merz
%     %% Dale Miller
%     %% Julien Narboux
%     %% Martin Suda: FOL ATP
%     %% Josef Urban: FOL ATP
%   \end{task}

%   \begin{task}[id=challenges,title=Logipedia as a Source of Challenges for Automatic Reasoners]
%     %% --> Translation to TPTP, SMT-LIB, DIMACS
%     %% Guillaume Burel: expertise / SAT
%     %% Pascal Fontaine: SMT-LIB
%     %% Cezary Kaliszyk: TPTP
%     %% Julien Narboux: Geometric benchs
%     %% Josef Urban: TPTP
%   \end{task}
%   \begin{task}[id=commang,title=Cooperation of Reasoners via Dedukti/Logipedia]

%     %% Once ITP understand Dedukti and ATP output Dedukti, then the first step of this is trivial
%     %% But many other things can be done within this task: choosing which solver to use, cutting proof obligations into pieces, etc...

%     %% Guillaume Burel: expertise
%     %% David Deharbe: Atelier B
%     %% Pascal Fontaine: SMT ++ ???
%     %% Chantal Keller: Knowledge in combining various ATPs
%     %% Martin Suda: cooperation between FOL ?
%     %% Josef Urban: cooperation between FOL ?
%   \end{task}
%   \begin{task}[id=database,title=A Database of Theorems for Automatic Solvers]

%     %% Depends on Task 2.  Then selecting Theorems a la Urban.

%     %% Guillaume Burel
%     %% David Deharbe
%     %% Pascal Fontaine
%     %% Emilio J. Gallego Arias
%     %% Thibault Gauthier
%     %% Olivier Hermant
%     %% Cezary Kaliszyk
%     %% Chantal Keller
%     %% Filip Marić
%     %% Stephan Merz
%     %% Dale Miller
%     %% Julien Narboux
%     %% Martin Suda
%     %% Josef Urban
%   \end{task}


% \end{tasklist}

\begin{wpdelivs}
  \begin{wpdeliv}[due=3,miles=startup,id=requirements,dissem=PU,nature=DEM,lead=Inr]
      {Requirements Analysis and Synchronization}
\end{wpdeliv}
\end{wpdelivs}
\end{workpackage}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../propB"
%%% End:
